<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>题库管理</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
<h2>题库管理</h2>

<form method="get" class="mb-3">
    <div class="row">
        <div class="col-md-4">
            <input type="text" name="search" th:value="${search}" placeholder="搜索题目内容..." class="form-control">
        </div>
        <div class="col-md-3">
            <select name="subjectId" class="form-select">
                <option value="">全部科目</option>
                <option th:each="s : ${subjects}" 
                        th:value="${s.id}" 
                        th:text="${s.name}"
                        th:selected="${subjectId == s.id}"></option>
            </select>
        </div>
        <div class="col-md-3">
            <select name="type" class="form-select">
                <option value="">全部题型</option>
                <option value="SINGLE" th:selected="${type == 'SINGLE'}">单选题</option>
                <option value="MULTIPLE" th:selected="${type == 'MULTIPLE'}">多选题</option>
                <option value="FILL" th:selected="${type == 'FILL'}">填空题</option>
                <option value="SUBJECTIVE" th:selected="${type == 'SUBJECTIVE'}">主观题</option>
            </select>
        </div>
        <div class="col-md-2">
            <select name="difficulty" class="form-select">
                <option value="">全部难度</option>
                <option value="1" th:selected="${difficulty == 1}">简单</option>
                <option value="2" th:selected="${difficulty == 2}">中等</option>
                <option value="3" th:selected="${difficulty == 3}">较难</option>
                <option value="4" th:selected="${difficulty == 4}">困难</option>
                <option value="5" th:selected="${difficulty == 5}">极难</option>
            </select>
        </div>
        <div class="col-md-1">
            <button type="submit" class="btn btn-outline-secondary">搜索</button>
        </div>
    </div>
</form>

<a href="/questions/add" class="btn btn-primary mb-3">+ 添加题目</a>

<table class="table table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>题目</th>
            <th>题型</th>
            <th>难度</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="q : ${questions}">
            <td th:text="${q.id}"></td>
            <td th:text="${q.content}"></td>
            <td th:text="${q.type}"></td>
            <td th:text="${q.difficulty}"></td>
            <td>
                <a th:href="@{/questions/edit/{id}(id=${q.id})}" class="btn btn-sm btn-warning">编辑</a>
                <a th:href="@{/questions/delete/{id}(id=${q.id})}" class="btn btn-sm btn-danger" onclick="return confirm('确定删除？')">删除</a>
            </td>
        </tr>
    </tbody>
</table>
</body>
</html>